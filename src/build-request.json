{
  "kind": "build_request",
  "title": "Fix ambient sound player audio source errors in Chrome",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-44",
      "text": "Replace the current audio source URLs in frontend/src/hooks/useAmbientSound.ts with reliable, publicly accessible audio file sources that work in Chrome browser, ensuring all sounds (rain, coffee shop, forest, waves, white noise, lofi beats) have valid audio sources with supported formats (MP3 or OGG)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-10"
        ],
        "quotes": [
          "all sound bruh why would only one",
          "no supported source"
        ]
      },
      "acceptanceCriteria": [
        "All six ambient sounds (rain, coffee shop, forest, waves, white noise, lofi beats) load successfully without 'no supported source' errors",
        "Audio files are in MP3 or OGG format supported by Chrome browser",
        "Audio sources are publicly accessible URLs that do not require authentication or have CORS restrictions",
        "When clicking play on any ambient sound, audio begins playback without errors"
      ]
    },
    {
      "id": "REQ-45",
      "text": "Add comprehensive error handling and logging in frontend/src/hooks/useAmbientSound.ts to catch and display specific error messages when audio fails to load or play, including checking for Audio element support, source loading errors, and playback failures",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-10"
        ],
        "quotes": [
          "unknown error"
        ]
      },
      "acceptanceCriteria": [
        "Console logs specific error messages when audio source fails to load",
        "Console logs specific error messages when audio playback fails",
        "Error states are captured and exposed to the UI component for user feedback",
        "Different error types (source loading vs playback) are distinguished in logging"
      ]
    },
    {
      "id": "REQ-46",
      "text": "Ensure the Audio element in frontend/src/hooks/useAmbientSound.ts is properly initialized before attempting to play, with proper preload settings and error event listeners attached before setting the source",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-10"
        ]
      },
      "acceptanceCriteria": [
        "Audio element is created with proper initialization sequence",
        "Error event listeners are attached before setting audio source",
        "Preload attribute is set appropriately for ambient sounds",
        "Audio element state is validated before play() is called"
      ]
    }
  ],
  "constraints": [
    "Do not modify frontend/src/hooks/useInternetIdentity.ts or frontend/src/hooks/useActor.ts",
    "Do not change the ambient sound player UI component structure beyond what's needed for error display",
    "Maintain the existing volume control and play/pause functionality",
    "Keep the localStorage persistence for sound selection and volume"
  ],
  "nonGoals": [
    "Adding new ambient sound types beyond the existing six",
    "Implementing custom audio upload functionality",
    "Creating audio visualization or equalizer features",
    "Adding audio effects or filters",
    "Implementing playlist or queue functionality"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}